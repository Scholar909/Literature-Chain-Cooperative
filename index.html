<!DOCTYPE html>
<html>
<head>
    <title>Math Graph Generator</title>
    <style>
        body { background-color: #f0f0f0; display: flex; flex-direction: column; align-items: center; font-family: sans-serif; }
        #canvasContainer { background-color: white; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-top: 20px; }
        canvas { background-color: white; }
        .controls { margin-top: 20px; }
        button { padding: 10px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>

<div id="canvasContainer">
    <canvas id="graphCanvas" width="600" height="600"></canvas>
</div>

<div class="controls">
    <button onclick="downloadImage()">Download Image</button>
</div>

<script>
    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');
    const margin = 50;
    const size = 500;
    const scale = 50; // 1 unit = 50 pixels

    function draw() {
        // Clear background to pure white
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Transform coordinate system (origin at bottom-left)
        ctx.translate(margin, canvas.height - margin);
        
        // Draw Axes
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(0, 0); ctx.lineTo(size, 0); // X axis
        ctx.moveTo(0, 0); ctx.lineTo(0, -size); // Y axis
        ctx.stroke();

        // Draw Vertical Strips (Hatching) in the bounded area
        ctx.strokeStyle = "#cccccc";
        ctx.lineWidth = 1;
        for (let x = 0.5; x < 8; x += 0.5) {
            let xPx = x * scale;
            let yStart = 0;
            let yEnd = (x <= 4) ? x : (16 / x);
            ctx.beginPath();
            ctx.moveTo(xPx, -yStart * scale);
            ctx.lineTo(xPx, -yEnd * scale);
            ctx.stroke();
        }

        // Draw y = x
        ctx.strokeStyle = "blue";
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(4 * scale, -4 * scale);
        ctx.stroke();
        ctx.fillStyle = "blue";
        ctx.fillText("y = x", 4 * scale + 5, -4 * scale);

        // Draw xy = 16 (y = 16/x)
        ctx.strokeStyle = "red";
        ctx.beginPath();
        for (let x = 2; x <= 10; x += 0.1) {
            let y = 16 / x;
            ctx.lineTo(x * scale, -y * scale);
        }
        ctx.stroke();
        ctx.fillStyle = "red";
        ctx.fillText("xy = 16", 10 * scale, -(16/10) * scale);

        // Draw x = 8
        ctx.strokeStyle = "green";
        ctx.beginPath();
        ctx.moveTo(8 * scale, 0);
        ctx.lineTo(8 * scale, -5 * scale);
        ctx.stroke();
        ctx.fillStyle = "green";
        ctx.fillText("x = 8", 8 * scale, -5 * scale - 5);

        // Draw Points and Labels
        const points = [
            {x: 0, y: 0, n: "A(0,0)"},
            {x: 4, y: 4, n: "B(4,4)"},
            {x: 8, y: 2, n: "C(8,2)"},
            {x: 8, y: 0, n: "D(8,0)"},
            {x: 4, y: 0, n: "E"}
        ];

        ctx.fillStyle = "black";
        points.forEach(p => {
            ctx.beginPath();
            ctx.arc(p.x * scale, -p.y * scale, 4, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText(p.n, p.x * scale + 5, -p.y * scale - 5);
        });
    }

    function downloadImage() {
        const link = document.createElement('a');
        link.download = 'graph.png';
        link.href = canvas.toDataURL();
        link.click();
    }

    draw();
</script>

</body>
</html>
