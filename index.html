<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand-Drawn Math Diagram Replicated</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: 'Times New Roman', Times, serif;
        }
        #canvasContainer {
            background: white;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }
        canvas {
            border: 1px solid #ddd;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div id="canvasContainer">
    <canvas id="mathCanvas" width="400" height="400"></canvas>
</div>

<button id="downloadBtn">Download Image</button>

<script>
    const canvas = document.getElementById('mathCanvas');
    const ctx = canvas.getContext('2d');

    function drawDiagram() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = 'black';
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        // Set Math Font
        ctx.font = 'italic 24px "Times New Roman"';
        ctx.fillStyle = 'black';

        // 1. Axes
        ctx.beginPath();
        ctx.moveTo(80, 50);
        ctx.lineTo(80, 350);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(70, 70); ctx.lineTo(80, 50); ctx.lineTo(90, 70);
        ctx.stroke();
        ctx.fillText('Y', 45, 75);

        ctx.beginPath();
        ctx.moveTo(80, 350);
        ctx.lineTo(350, 350);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(330, 340); ctx.lineTo(350, 350); ctx.lineTo(330, 360);
        ctx.stroke();
        ctx.fillText('X', 355, 365);

        // 2. Parabola/Curve (y = sqrt(2(2-x)))
        ctx.beginPath();
        ctx.moveTo(80, 80); 
        ctx.quadraticCurveTo(300, 80, 300, 350); 
        ctx.stroke();

        // 3. Line (y = 2 - x)
        ctx.beginPath();
        ctx.moveTo(80, 80); 
        ctx.lineTo(300, 350); 
        ctx.stroke();

        // 4. Labels A and B
        ctx.fillText('B', 95, 75);
        ctx.fillText('A', 305, 340);

        // 5. Equations
        ctx.font = 'italic 18px "Times New Roman"';
        ctx.fillText('y = √2(2-x)', 200, 40);
        ctx.fillText('y² = 2(2-x)', 210, 80);
        
        // MOVED CLOSER: Translation adjusted to pull label tighter to the line
        ctx.save();
        ctx.translate(140, 180); 
        ctx.rotate(Math.atan2(270, 220));
        ctx.fillText('y = 2 - x', 10, 30); 
        ctx.restore();

        // 6. Shaded Region with Diagonal Strips
        const startX = 185;
        const endX = 215;
        
        const yLineStart = 80 + (startX - 80) * (270 / 220); 
        const yLineEnd = 80 + (endX - 80) * (270 / 220);     
        
        // REDUCED HEIGHT: Adjusted Y values to sit exactly on the curve y² path
        const yCurveStart = 107; 
        const yCurveEnd = 125;   

        ctx.save();
        ctx.beginPath();
        ctx.moveTo(startX, yLineStart); 
        ctx.lineTo(endX, yLineEnd);   
        ctx.lineTo(endX, yCurveEnd);   
        ctx.quadraticCurveTo(200, 110, startX, yCurveStart); 
        ctx.closePath();
        ctx.clip(); 
        
        ctx.lineWidth = 1.5; // Slightly thicker for a more hand-drawn look
        for (let i = -100; i < 600; i += 8) {
            ctx.beginPath();
            ctx.moveTo(0, i);
            ctx.lineTo(i, 0);
            ctx.stroke();
        }
        ctx.restore();
        
        // Redraw vertical strip boundary lines
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(startX, yLineStart); ctx.lineTo(startX, yCurveStart);
        ctx.moveTo(endX, yLineEnd); ctx.lineTo(endX, yCurveEnd);
        ctx.stroke();
    }

    drawDiagram();

    document.getElementById('downloadBtn').addEventListener('click', function() {
        const link = document.createElement('a');
        link.download = 'exact-math-diagram.png';
        link.href = canvas.toDataURL();
        link.click();
    });
</script>

</body>
</html>
